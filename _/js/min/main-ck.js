var debug=!0,landingPage=!1,sectionName="",als=Object.create({init:function(){als.getElements(),als.loadComponents(),als.crunchNumbers(),$("#side-nav .collapse").collapse("hide"),$(".tooltip_btn").tooltip(),als.elements.$window.on("scroll",als.scrollLoop),als.elements.$window.on("resize",als.crunchNumbers),als.elements.$sideNav.on("click","a",als.scrollTo),als.currentPage=$("body").attr("id"),debug&&console.log("all done with initialization")},getElements:function(){als.elements={$window:$(window),$contenido:$(".contenido"),$texto:$(".texto"),$header:$("header"),$jumbotron:$(".jumbotron-container"),$quotes:$(".quotes"),$sideNav:$("#side-nav"),$adendums:$("#adendums"),$bgImg:$(".bg-img"),wrapper:$(".descropcion-wrapper")}},loadComponents:function(e){void 0===e&&($.ajax("_/components/header.html",{success:function(e){$("header").html(e)},error:function(e,o,t){},timeOut:3e3}),landingPage&&$.ajax("_/components/landing.html",{success:function(e){$(".landing").html(e),$(".landing-wrapper").css("height",winHeight+"px"),$(".landing-wrapper .background").animate({opacity:"1"},"slow")},error:function(e,o,t){},timeOut:3e3}),$.ajax("_/components/jumbotron.html",{success:function(e){$(".jumbotron-container").html(e)},error:function(e,o,t){},timeOut:3e3}),debug&&console.log("loaded all the ajax"))},scrollLoop:function(){var e=als.elements.$window.scrollTop(),o=self.windowHeight-self.headerHeight,t=void 0===als.elements.$adendums?als.elements.$adendums.offset().top:"empty",s=void 0!==als.elements.$bgImg.data("ratio")?+als.elements.$bgImg.data("ratio"):1,n=0,a=0,l,i,c,d,r,h,g,m=0,u,p=!1;console.log("scrollRatio",s),als.elements.$contenido.each(function(o,t){l=als.contenidos[o].name,i=$(t).position().top+parseInt($(t).css("margin-top"),10),c=$(t).height(),d=als.contenidos[o].offsetTop;var r=200+self.headerHeight,h=r>i-e?!0:!1,g=self.headerHeight>i-e?!0:!1,m=e>i+c-self.headerHeight?!0:!1,p=self.headerHeight>i+200-e?!0:!1;p&&"que-hacemos"===l?als.elements.$adendums.css({position:"fixed",top:self.headerHeight+"px"}):"que-hacemos"===l&&als.elements.$adendums.css({position:"absolute",top:"200px"}),h&&!m&&(u=l,n=o,$(".quotes").removeClass("activeQ"),$($(".quotes")[n]).addClass("activeQ"),"servicios"===als.currentPage&&sectionName!==l&&($("#side-nav .collapse").collapse("hide"),$("#"+l).hasClass("in")||$("#"+l).collapse("show")),sectionName=l,als.elements.$bgImg.css({"background-position":"50%"+e*s+"px"})),a=n});for(var f=[],w,b=als.textos.length-1;b>=0;b--)als.textos[b].topPos<e&&(f[b]=als.textos[b].name,w=f[f.length-1],als.textos[f.length-1]);u=l},crunchNumbers:function(){self.windowHeight=als.elements.$window.height(),self.windowWidth=als.elements.$window.width(),self.headerHeight=als.elements.$header.height(),self.jumbotronHeight=als.elements.$jumbotron.height(),als.contenidos=[],als.textos=[],als.elements.$contenido.each(function(e,o){console.log("HOLAAAA "+e,$(o).attr("id")),als.contenidos[e]={},als.contenidos[e].name=$(o).attr("id"),als.contenidos[e].topPos=$(o).offset().top,als.contenidos[e].height=$(o).height(),als.contenidos[e].offsetTop=void 0!==$(o).data("top-offset")?+$(o).data("top-offset"):0}),als.elements.$texto.each(function(e,o){console.log("HOLAAAA "+e,$(o).attr("id")),als.textos[e]={},als.textos[e].name=$(o).attr("id"),als.textos[e].topPos=$(o).offset().top,als.textos[e].height=$(o).height(),als.textos[e].offsetTop=void 0!==$(o).data("top-offset")?+$(o).data("top-offset"):0}),debug&&console.log("winHeigh: "+self.windowHeight+"winWidth: "+self.windowWidth,"\nheaderHeight: "+self.headerHeight,"\ntextos  ",als.textos),debug&&console.log("just crunched the numbers")},scrollTo:function(e){e.preventDefault(),console.log("just clicked on  ");var o=$(e.currentTarget)[0],t=$(o).attr("href");yPosTarget=$("body").find(t).offset().top+parseInt($(t).css("margin-top"),10),"inicio"===als.currentPage&&(yPosTarget-=250),"servicios"===als.currentPage&&(yPosTarget-=self.headerHeight),"#busqueda-collapse"===t||"#processo-collapse"===t||"#desarollo-collapse"===t||$("body,html").animate({scrollTop:yPosTarget},1e3),console.log(o,t,yPosTarget,$(t).css("margin-top"))}});